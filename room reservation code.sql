
CREATE DATABASE Room_Bookings3
USE Room_Bookings3
CREATE TABLE CUSTOMER (
CUSTOMER_ID INT PRIMARY KEY (CUSTOMER_ID) NOT NULL,
CUSTOMER_FNAME VARCHAR(50) NOT NULL,
CUSTOMER_MNAME VARCHAR(50) NOT NULL,
CUSTOMER_LNAME VARCHAR(50) NOT NULL,
ADD_CITY VARCHAR(50) NOT NULL,
ADD_STATE VARCHAR(50) NOT NULL,
NATIONAL_ID INT NOT NULL UNIQUE,
PHONE_NO VARCHAR(15) NOT NULL,
EMAIL VARCHAR(50) NOT NULL
)

CREATE TABLE SYSTEMADMIN (
ADMIN_ID INT PRIMARY KEY (ADMIN_ID) NOT NULL,
ADMIN_PASSWORD VARCHAR(20) NOT NULL,
ADMIN_USERNAME VARCHAR(20)NOT NULL UNIQUE,
F_NAME VARCHAR(50) NOT NULL,
M_NAME VARCHAR(50)NOT NULL,
L_NAME VARCHAR(50)NOT NULL,
CUSTOMER_ID INT REFERENCES CUSTOMER(CUSTOMER_ID)
)
CREATE TABLE HOTELMANAGER (
MANAGER_ID INT PRIMARY KEY (MANAGER_ID)NOT NULL,
MANAGER_PASSWORD VARCHAR(20) NOT NULL,
MANAGER_USERNAME VARCHAR(20) NOT NULL UNIQUE,
F_NAME VARCHAR(50) NOT NULL ,
M_NAME VARCHAR(50) NOT NULL,
L_NAME VARCHAR(50) NOT NULL,
ADMIN_ID INT REFERENCES SYSTEMADMIN (ADMIN_ID)
) 
CREATE TABLE ROOM(
ROOM_ID INT PRIMARY KEY (ROOM_ID) NOT NULL,
ROOM_NO INT NOT NULL UNIQUE,
PRICE  DECIMAL (4,2) NOT NULL ,
TYPE_SINGLE VARCHAR(3) NOT NULL,
TYPE_DOUBLE VARCHAR(3) NOT NULL, 
CUSTOMER_ID INT REFERENCES CUSTOMER(CUSTOMER_ID) NOT NULL
)
ALTER TABLE ROOM ALTER COLUMN PRICE DECIMAL(6,2)
CREATE TABLE BOOKING(
BOOK_ID INT PRIMARY KEY (BOOK_ID)NOT NULL,
CHECKIN_DATE DATE NOT NULL,
CHECKOUT_DATE DATE NOT NULL,
CUSTOMER_ID INT REFERENCES CUSTOMER(CUSTOMER_ID) NOT NULL
) 
CREATE TABLE PAYMENTGATEWAY(
PAYMENT_ID INT PRIMARY KEY (PAYMENT_ID) NOT NULL,
PAYMENT_DATE DATE  NOT NULL,
PAYMENT_METHOD VARCHAR(20) NOT NULL,
CUSTOMER_ID INT REFERENCES CUSTOMER(CUSTOMER_ID) NOT NULL
)

INSERT INTO CUSTOMER (CUSTOMER_ID, CUSTOMER_FNAME, CUSTOMER_MNAME, CUSTOMER_LNAME, ADD_CITY, ADD_STATE, NATIONAL_ID, PHONE_NO, EMAIL) VALUES
(1, 'beimnet', 'belay', 'sara', 'Hosanna', 'central ethiopia', 1001, '0993426226', 'beimnet@email.com'),
(2, 'Alemu', 'kasa', 'Smith', 'Addis Ababa', 'Addis', 1002, '0993426354', 'alemusmith@email.com'),
(3, 'Michael', 'Teshe', 'John', 'Hawassa', 'Sidama', 1003, '0461108070', 'michael.j@email.com'),
(4, 'Sara', 'giya', 'gedebo', 'Hosanna', 'central ethiopia', 1004, '0704853473', 'sarah.w@email.com'),
(5, 'David', 'beckham', 'baba', 'Jimma', 'Oromia', 1005, '0972649226', 'david.b@email.com'),
(6,'Abera','Mathiwos','Gada','Wolayita','Southern ethiopia',1006,'0992238751','sirefaf.@gmail,com'),
(7,'Yosef','Beyene','Minda','Adama','Oromia',1007,'0920990275','dave.@email,com'),
(8,'Beza','Yohannes','Abaynh','Halaba','Central ethiopia',1008,'0938872348','bezi@email.com'),
(9,'Trent','Alexander','Arnold','Toronto','Canada',1009,'+4722345678','trent@gmail.com'),
(10,'Metadel','Tilahun','Tesfaye','Hossana','Central ethiopia',1010,'0986172397','meti@.gmail.com')

-- Insert into SYSTEMADMIN table
INSERT INTO SYSTEMADMIN (ADMIN_ID, ADMIN_PASSWORD, ADMIN_USERNAME, F_NAME, M_NAME, L_NAME, CUSTOMER_ID) VALUES
(101, 'ASHA1234', 'ASHUW', 'ASHAGRE', 'WERKICHO', 'KASA', 1)


-- Insert into HOTELMANAGER table
INSERT INTO HOTELMANAGER (MANAGER_ID, MANAGER_PASSWORD, MANAGER_USERNAME, F_NAME, M_NAME, L_NAME, ADMIN_ID) VALUES
(201, 'GET1234', 'GETSH', 'GETACHEW', 'MEKONIN', 'ZEWDE', 101)

-- Insert into ROOM table
INSERT INTO ROOM (ROOM_ID, ROOM_NO, PRICE, TYPE_SINGLE, TYPE_DOUBLE, CUSTOMER_ID) VALUES
(301, 101, '800', 'Yes', 'No', 1),
(302, 102, '1200', 'No', 'Yes', 2),
(303, 103, '850', 'Yes', 'No', 3),
(304, 104, '1400', 'No', 'Yes', 4),
(305, 105, '1000', 'Yes', 'No', 5),
(306, 106, '900',  'Yes', 'No', 6),
(307, 107, '1100',  'No',  'Yes',7),
(308, 108, '950' ,  'Yes', 'No',8),
(309, 109,  '1300',  'No' , 'Yes',9),
(310, 110,  '800',   'Yes' ,'No',10);


-- Insert into BOOKING table
INSERT INTO BOOKING (BOOK_ID, CHECKIN_DATE, CHECKOUT_DATE, CUSTOMER_ID) VALUES
(401, '2025-01-10', '2025-01-15', 1),
(402, '2025-02-01', '2025-02-05', 2),
(403, '2025-03-12', '2025-03-17', 3),
(404, '2025-04-13', '2025-04-18', 4),
(405, '2025-05-14', '2025-05-19', 5 ),
(406, '2025-01-15', '2025-01-20', 6),
(407, '2025-02-16', '2025-02-21', 7),
(408, '2025-03-17', '2025-03-22', 8),
(409, '2025-04-18', '2025-04-23', 9),
(410, '2025-05-19', '2025-05-20', 10 );

-- Insert into PAYMENTGATEWAY table
INSERT INTO PAYMENTGATEWAY (PAYMENT_ID, PAYMENT_DATE, PAYMENT_METHOD, CUSTOMER_ID) VALUES
(501, '2025-01-09', 'Mobile Banking', 1),
(502, '2025-01-31', 'Internet Banking', 2),
(503, '2025-03-11', 'Cash', 3),
(504, '2025-04-19', 'Mobile Banking', 4),
(505, '2025-05-04', 'Internet Banking', 5),
(506, '2025-06-15', 'Mobile Banking' , 6),
(507, '2025-07-20', 'Internet Banking', 7),
(508, '2025-08-12', 'Mobile Banking' ,8),
(509, '2025-09-18', 'Internet Banking' ,9),
(510, '2025-10-25', 'Mobile Banking' ,10);

 SELECT * FROM PAYMENTGATEWAY
 SELECT * FROM BOOKING 
 SELECT * FROM CUSTOMER 
 SELECT * FROM ROOM
 SELECT * FROM HOTELMANAGER
 SELECT * FROM SYSTEMADMIN

 ALTER TABLE CUSTOMER ALTER COLUMN CUSTOMER_FNAME VARCHAR(30) NOT NULL;
 SELECT * FROM CUSTOMER where CUSTOMER_ID =5;
 SELECT * FROM CUSTOMER where CUSTOMER_FNAME='Metadel'and CUSTOMER_ID=10;
 SELECT * FROM CUSTOMER where PHONE_NO='0992238751';
 SELECT * FROM CUSTOMER where national_id=1007;
 SELECT DISTINCT CUSTOMER_FNAME FROM CUSTOMER;
 SELECT * FROM ROOM WHERE PRICE>1200;
 SELECT * FROM ROOM WHERE ROOM_NO>=105;
 UPDATE CUSTOMER SET CUSTOMER_LNAME='Abebe' where CUSTOMER_ID=8;
 UPDATE CUSTOMER SET CUSTOMER_FNAME='Abenezer' where CUSTOMER_ID=7;
 UPDATE CUSTOMER SET CUSTOMER_LNAME='Debebe' where CUSTOMER_ID=1;
 SELECT * FROM CUSTOMER where CUSTOMER_FNAME like 'M%';
 SELECT * FROM ROOM WHERE PRICE > ANY
 (SELECT PRICE FROM ROOM WHERE PRICE>850);
 SELECT COUNT (*) FROM CUSTOMER;
 SELECT COUNT (*) FROM CUSTOMER WHERE CUSTOMER_ID=7;
 DELETE FROM CUSTOMER WHERE CUSTOMER_LNAME='Abaynh';
 SELECT C.CUSTOMER_ID, C.CUSTOMER_FNAME,C.CUSTOMER_LNAME, R.ROOM_ID,R.ROOM_NO,PRICE 
 FROM CUSTOMER C join ROOM R on C.CUSTOMER_ID=R.CUSTOMER_ID;

 SELECT C.CUSTOMER_ID,C.CUSTOMER_FNAME,C.CUSTOMER_LNAME,P.PAYMENT_ID,P.PAYMENT_DATE,P.PAYMENT_METHOD
 FROM CUSTOMER C join PAYMENTGATEWAY P on C.CUSTOMER_ID=P.CUSTOMER_ID;

 SELECT C.CUSTOMER_ID,C.CUSTOMER_FNAME,C.CUSTOMER_LNAME,B.BOOK_ID,B.CHECKIN_DATE,B.CHECKOUT_DATE
 FROM CUSTOMER C join BOOKING B ON C.CUSTOMER_ID=B.CUSTOMER_ID;

 SELECT * FROM CUSTOMER C left outer join ROOM R on C.CUSTOMER_ID=R.CUSTOMER_ID;
 SELECT * FROM CUSTOMER C right outer join ROOM R on C.CUSTOMER_ID=R.CUSTOMER_ID;
 SELECT * FROM CUSTOMER,ROOM SELECT * FROM CUSTOMER C full outer join ROOM R on C.CUSTOMER_ID=R.CUSTOMER_ID;

 SELECT * FROM CUSTOMER C left outer join PAYMENTGATEWAY P on C.CUSTOMER_ID=P.CUSTOMER_ID;
  SELECT * FROM CUSTOMER C right outer join PAYMENTGATEWAY P on C.CUSTOMER_ID=P.CUSTOMER_ID;
SELECT * FROM CUSTOMER,PAYMENTGATEWAY SELECT * FROM CUSTOMER C FULL outer join PAYMENTGATEWAY P on C.CUSTOMER_ID=P.CUSTOMER_ID;

 SELECT * FROM CUSTOMER C left outer join BOOKING B on C.CUSTOMER_ID=B.CUSTOMER_ID;
 SELECT * FROM CUSTOMER C right outer join BOOKING B on C.CUSTOMER_ID=B.CUSTOMER_ID;
 SELECT * FROM CUSTOMER,BOOKING SELECT * FROM CUSTOMER C full outer join BOOKING B on C.CUSTOMER_ID=B.CUSTOMER_ID;